<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
<HEAD>
<TITLE>プログラムの書式</TITLE>
</HEAD>

<BODY BGCOLOR=#ffffff>
<H2>プログラムの書式</H2>

<font size=-1>[ <A HREF="source.html">前ページへ</A> | <A HREF="symbol.html">次ページへ</A> ]</font>
<HR>

<P>ソースファイルの1行は、次のように4つのフィールドに分かれています。プログラムを記述する時は、これらの各フィールドに従って記述します。</P>

<PRE>
symbol	lda	$10	; これはテストです.
↑	↑	↑	↑
Symbol	Op-code	Operand	Comment
</PRE>

<TABLE width=100% BORDER=1>
<TR bgcolor=gray>
	<TH><BR></TH>
	<TH ALIGN=LEFT VALIGN=TOP NOWRAP>フィールド名</TD>
	<TH ALIGN=LEFT VALIGN=TOP NOWRAP>記述制限</TD>
</TR>
<TR ALIGN=LEFT VALIGN=TOP>
	<TD NOWRAP>Symbol</TD>
	<TD NOWRAP><A HREF="#SYMBOL">シンボルフィールド</A></TD>
	<TD>1カラム目から64文字まで。</TD>
</TR>
<TR ALIGN=LEFT VALIGN=TOP>
	<TD NOWRAP>Op-code</TD>
	<TD NOWRAP><A HREF="#OPECODE">オペコードフィールド</A></TD>
	<TD>2カラム目以降64文字まで。</TD>
</TR>
<TR ALIGN=LEFT VALIGN=TOP>
	<TD NOWRAP>Operand</TD>
	<TD NOWRAP><A HREF="#OPERAND">オペランドフィールド</A></TD>
	<TD>2カラム目以降コメントフィールドと合わせて384文字まで。</TD>
</TR>
<TR ALIGN=LEFT VALIGN=TOP>
	<TD NOWRAP>Comment</TD>
	<TD NOWRAP><A HREF="#COMMENT">コメントフィールド</A></TD>
	<TD>セミコロン（;）で始まり、どのカラムからでも良く、オペランドフィールドと合わせて384文字まで。</TD>
</TR>
</TABLE>

<P>ソースファイルの1行には、必ずしも上記の全てのフィールドが必要ではありません。また、複数のフィールドが1行に存在する時は、各フィールドはスペースまたはタブで区切ってください。ただし、コメントフィールドの直前に区切りのためのスペースやタブを挿入しなくても問題はありません。</P>
<P>また、ソースファイルの1行は512文字まで記述することができます。ただし、あまり長すぎるとエディタで編集し難くなるので、適当に改行することをお薦めします。</P>

<H3><A NAME="SYMBOL">シンボルフィールド</A></H3>
<P>1カラム目から記述する部分を示し、ここには定義するシンボル名やマクロ名を記述します。このシンボルフィールドは64文字分ありますが、シンボル名として判断される文字数はグローバルシンボルは32文字、ローカルシンボルは27文字、マクロ名は32文字までなので注意してください。</P>
<P>シンボルの直後には、コロン（:）を一つ付加して明示的にシンボルであることを示すことができますが、コロンを付加していない時と機能的に何等変わることはありません。また、グローバルシンボルの直後にコロンを二重に付加した時は、外部定義シンボルとして定義され、シンボリックデバッグに必要なシンボル情報としてISXファイルに出力されます。</P>

<PRE>symbol1				; 正常
symbol2:			; 正常
symbol3::			; 正常（外部定義シンボルとして判断される）
	symbol4			; 誤り（オペコードとして判断される）
</PRE>

<P>なお、シンボルについては"第４章　式"の"<A HREF="symbol.html">シンボル</A>"、マクロ名については同じ章の"<A HREF="name.html">名前</A>"の項目を参照してください。</P>

<H3><A NAME="OPECODE">オペコードフィールド</A></H3>
<P>2カラム目以降に初めて記述する部分を示し、オペコード、疑似命令、およびマクロを呼び出す時のマクロ名を記述します。シンボルフィールドにシンボルが記述されている場合は、シンボルフィールドとオペコードフィールドとの間に一つ以上のタブまたはスペースを挿入してください。</P>

<PRE>	rts			; 正常
symbol	rts			; 正常
rts				; 誤り（オペコードとは判断されずシンボルと判断
				; される）
</PRE>

<H3><A NAME="OPERAND">オペランドフィールド</A></H3>
<P>オペコードフィールドに記述されたオペコードに対するオペランド、疑似命令およびマクロに対するパラメータを記述するフィールドです。オペコードフィールドとオペランドフィールドとの間には、一つ以上のタブまたはスペースを挿入してください。</P>

<PRE>	lda	#$10		; 正常
	lda#$10			; 誤り（オペコードとオペランドの間に区切りがな
				; い）
</PRE>

<H3><A NAME="COMMENT">コメントフィールド</A></H3>
<P>コメントを記述するためのフィールドです。必ずセミコロン（;）から始まり、行の終わりまでがコメントフィールドとなります。セミコロンがシングルクォーテーション（' '）やダブルクォーテーション（" "）で囲まれていると文字や文字列と判断されるので 、これらで囲まれていてはいけません。また、このフィールドはどのカラムから始まってもかまいません。</P>

<PRE>; これは正しいコメントの記述です.
	lda	#$10		; これも正しいコメントの記述です.
	db	"; これはコメントではなくデータです. "
</PRE>

<p>なお、<a href="title.html">TITLE疑似命令</a>はその疑似命令を記述した行の終わりまでをパラメータとして判断するため、<a href="title.html">TITLE疑似命令</a>を記述した行にコメントを記述することはできません。</p>

<HR>

</BODY>
</HTML>
