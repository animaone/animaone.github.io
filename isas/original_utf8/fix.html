<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
<HEAD>
<TITLE>定数</TITLE>
</HEAD>

<BODY BGCOLOR=#ffffff>
<H2>定数</H2>

<font size=-1>[ <A HREF="name.html">前ページへ</A> | <A HREF="prefix.html">次ページへ</A> ]</font>
<HR>

<P>ここでは、ISASで使用できる<A HREF="#NUMBER">数値定数</A>、<A HREF="#FLOAT">浮動小数点定数</A>、<A HREF="#CHARACTER">文字定数</A>、および<A HREF="#CHARACTERS">文字列定数</A>の定数について説明します。</P>

<H3><A NAME="NUMBER">数値定数</A></H3>
<P>数値定数は、2進数、8進数、10進数、および16進数の形式で扱うことができます。これらの形式は基数によって指定することができます。数値定数の基数を指定するには、数値定数の前または後ろに基数を示す文字（基数演算子）を記述します。</P>
<P>ISASでは、数値定数に基数演算子が付加されていない時は、通常その数値定数を10進数として扱います。ただし、<A HREF="radix.html">RADIX疑似命令</A>によって基数のデフォルト値が変更されている時は、指定された基数値が参照されます。また、数値定数に基数演算子が付加されている時は、<A HREF="radix.html">RADIX疑似命令</A>の指定に係わらず基数演算子の指定が優先されます。なお、<A HREF="radix.html">RADIX疑似命令</A>の詳細については、"第５章　疑似命令"の"<A HREF="radix.html">RADIX</A>"の項目を参照してください。</P>

<TABLE WIDTH=100% BORDER=1>
<TR bgcolor=gray>
	<TH ALIGN=LEFT VALIGN=TOP NOWRAP>基数</TH>
	<TH ALIGN=LEFT VALIGN=TOP NOWRAP>前置基数演算子</TH>
	<TH ALIGN=LEFT VALIGN=TOP NOWRAP>後置基数演算子</TH>
	<TH ALIGN=LEFT VALIGN=TOP NOWRAP>ONCNUM疑似命令指定時</TH>
</TR>
<TR ALIGN=LEFT VALIGN=TOP>
	<TD NOWRAP>2進数</TD>
	<TD NOWRAP>%10101100</TD>
	<TD NOWRAP>10101100b</TD>
	<TD NOWRAP>0b10101100</TD>
</TR>
<TR ALIGN=LEFT VALIGN=TOP>
	<TD NOWRAP>8進数</TD>
	<TD NOWRAP>@123</TD>
	<TD NOWRAP>123o</TD>
	<TD NOWRAP>0o123</TD>
</TR>
<TR ALIGN=LEFT VALIGN=TOP>
	<TD NOWRAP>10進数</TD>
	<TD NOWRAP>1234</TD>
	<TD NOWRAP>1234d</TD>
	<TD NOWRAP>1234</TD>
</TR>
<TR ALIGN=LEFT VALIGN=TOP>
	<TD NOWRAP>16進数</TD>
	<TD NOWRAP>$1234</TD>
	<TD NOWRAP>1234h</TD>
	<TD NOWRAP>0x1234</TD>
</TR>
</TABLE>

<P>また、<A HREF="oncnum.html">ONCNUM疑似命令</A>を指定した後には、これらの指定方法の他にC言語ライクに定数を記述することができます。なお、基数演算子は大文字と小文字の何れで記述してもかまいません。</P>

<H3><A NAME="FLOAT">浮動小数点定数</A></H3>
<P>V810SFプロセッサとしてISASを使用されている時は、浮動小数点定数を使用することができます。浮動小数点定数を指定する時には、予め<A HREF="oncnum.html">ONCNUM疑似命令</A>を指定する必要があります。また、浮動小数点定数にはその直前に浮動小数点定数を表わす基数演算子0fを記述します。なお、浮動小数点定数は次の形式で表現することができます。

<UL>
<LI>&lt;仮数部&gt;<!-- <仮数部> -->
<LI>&lt;仮数部&gt;e&lt;指数部&gt;または&lt;仮数部&gt;E&lt;指数部&gt;<!-- <仮数部>e<指数部>または<仮数部>E<指数部> -->
</UL>

&lt;仮数部&gt;<!-- <仮数部> -->は、小数点を含む仮数値を記述します。小数点が不要な場合は記述する必要はありません。符号が必要な時には仮数値に符号を付加することができます。また、&lt;指数部&gt;<!-- <指数部> -->には指数値を記述します。符号が必要な時には指数値に符号を付加することができます。</P>

<H3><A NAME="PAUSE">数値定数の区切り</A></H3>
<P>数値定数は、可読性を向上させるために数値表現の途中にアンダーバー（_）を挿入することができます。アンダーバーは、数値定数内であればどの位置に記述してもかまいません。例えば、次のように2進数の数値定数を4ビット毎にアンダーバーで区切ることにより、解りやすく記述することができます。</P>

<PRE>	lda	#%0001001001001000	; 区切りを使用しない
	lda	#%0001_0010_0100_1000	; 区切りを使用する
</PRE>

<H3><A NAME="HEX">16進数値定数指定時の注意</A></H3>
<P>16進数の数値定数を指定する時、数値定数の先頭の文字がAからFの値で、かつ、後置基数演算子を付加した時、シンボルと明確に区別するために数値定数の先頭に0を付けてください。例えば、次のように0の付け方によって、シンボルとして判断するか数値定数として判断するかが変わります。</P>

<PRE>	jmp	abch			; シンボルabchにジャンプする
	jmp	0abch			; 0abch番地にジャンプする
</PRE>

<H3><A NAME="CHARACTER">文字定数</A></H3>
<P>文字定数とは、一文字をシングルクォーテーション（' '）で囲んだものをいいます。文字定数は、イミディエイトアドレッシングのオペランド、および<A HREF="defb.html">DEFB/DB疑似命令</A>のパラメータに指定することができます。</P>
<P>文字定数にシングルクォーテーションを記述したい時は、シングルクォーテーションを続けて記述します。</P>

<PRE>	db	''''
</PRE>

<P>この結果、「'」というデータを作成することができます。</P>

<H3><A NAME="CHARACTERS">文字列定数</A></H3>
<P>文字列定数とは、二文字以上の文字列をダブルクォーテーション（" "）で囲んだものをいいます。文字列定数は、<A HREF="defb.html">DEFB/DB疑似命令</A>のパラメータで指定することができます。</P>
<P>文字列定数内にダブルクォーテーションを記述したい時は、ダブルクォーテーションを続けて記述します。</P>

<PRE>	db	"これは""テスト""です."
</PRE>

<P>この結果、「これは"テスト"です.」というデータを作成することができます。</P>

<h3><a name="LOCATION">ロケーションカウンタ</a></h3>
<p>ISASには、定数の代わりにアスタリスク（*）を記述することにより、記述位置のアドレスを取得することができるロケーションカウンタを用意しています。
例えば、ロケーションカウンタを6番地進めたい時には、<a href="org.html">ORG疑似命令</a>とアスタリスク（*）を使って次のように記述します。</p>

<pre>	org	*+6			; ロケーションカウンタを6番地進める
</pre>

<p>また、オペランドにアスタリスク（*）を記述した時には、オペランドに対するオペコードが格納される先頭アドレスが取得されます。</p>

<pre>	lda	*			; ロケーションカウンタを取得する
</pre>

<HR>

</BODY>
</HTML>
